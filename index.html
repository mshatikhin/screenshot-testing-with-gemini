<!DOCTYPE html>
<html lang="ru-RU">
<head>
    <title>Shower Presentation Engine</title>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel="stylesheet" href="shower/themes/ribbon/styles/screen-4x3.css">
</head>
<body class="shower list">

<header class="caption">
    <h1>Скриншотное тестирование с использованием gemini</h1>
    <p>СКБ Контур 2017</p>
</header>

<section class="slide" id="cover">
    <h2>Скриншотное тестирование с использованием gemini</h2>
    <figure>
        <img class="cover" src="pictures/cover.jpg" alt="Cover">
    </figure>
    <style>
        #cover h2 {
            margin: 250px 0 0;
            color: #FFF;
            text-align: center;
            font-size: 70px;
        }
    </style>
</section>

<section class="slide">
    <h2>Обо мне</h2>
    <ul>
        <li>Фронтендер в проекте Контур.Гособлако</li>
        <li>Использую стек React - Redux - ...</li>
        <li>Пишу на typescript</li>
        <li>Пишу тесты на фронтенд</li>
    </ul>
</section>

<section class="slide">
    <img src="./pictures/Logo%20GO.png" class="cover" style="padding: 0 100px;">
</section>

<section class="slide">
    <img class="cover place width top" src="pictures/Основная%20информация.png">
</section>

<section class="slide">
    <img class="cover place width top" src="pictures/ИД%202.png">
</section>

<section class="slide">
    <img class="cover place width top" src="pictures/Новый%20ТД.png">
</section>

<section class="slide">
    <img class="cover place width top" src="pictures/Создание%20сотрудника%202.png">
</section>

<section class="slide">
    <h2>Контур.Гособлако</h2>
    <ul>
        <li>SPA приложение</li>
        <li>Много динамики</li>
        <li>Бэкенд генерирует meta описание для генерации форм</li>
        <li>В будущем порядка 350 редакторов реквизитов</li>
        <li>Кастомизация под заказчика</li>
    </ul>
</section>

<section class="slide">
    <h2>Виды тестирования</h2>
    <ul>
        <li>e2e <code>(nigthwatch)</code></li>
        <li>css/style <code>(gemini)</code></li>
        <li>integration <code>(jest, enzyme)</code></li>
        <li>unit <code>(jest)</code></li>
        <li>structure <code>(jest snapshot)</code></li>
        <li>type checking <code>(typescript)</code></li>
    </ul>
</section>

<section class="slide">
    <h2 class="shout">css/style testing</h2>
</section>

<section class="slide">
    <h2 class="shout">Острота зрения</h2>
</section>

<section class="slide">
    <img src="pictures/tab2.jpg" class="cover"/>
</section>

<section class="slide">
    <img src="pictures/tab_diff_2.jpg" class="cover"/>
</section>

<section class="slide">
    <h2>Потребности</h2>
    <ul>
        <li>Тратить меньше времени на ручное тестирование</li>
        <li>Избавиться от боли после рефакторинга</li>
        <li>Повысить надежность приложения</li>
        <li>После обновления сторонних UI библиотек быть спокойнее</li>
    </ul>
</section>

<section class="slide">
    <h2>Как хочется</h2>
    <ul>
        <li>Делать скриншоты компонентов в разных состояних</li>
        <li class="next">Сравнивать скриншоты между собой автоматически</li>
        <li class="next">Хранить эталоны в репозитории</li>
        <li class="next">Тестировать верстку в разных браузерах</li>
    </ul>
</section>

<section class="slide">
    <h2>Инструменты</h2>
    <ul>
        <li><a target="_blank" href="https://translate.google.com/?hl=ru#auto/ru/Hands%20and%20eyes">Hands and eyes</a>
        </li>
        <li><a target="_blank" href="https://staff.skbkontur.ru/profile/titarenko">webdiff</a>, <a target="_blank"
                                                                                                   href="https://github.com/bslatkin/dpxdt">DPXDT</a>
        </li>
        <li><a target="_blank" href="https://github.com/Huddle/PhantomCSS">casper.js + phantom.css</a></li>
        <li><a target="_blank" href="https://github.com/gemini-testing/gemini">gemini</a></li>
    </ul>
</section>

<section class="slide">
    <h2>Тестирование вручную</h2>
    <ul>
        <li>Много рутинной работы</li>
        <li>Человеческий фактор</li>
    </ul>
    <div class="place bottom" style="bottom: 100px;">
        <img src="pictures/eyes.gif" width="500" class="next"/>
    </div>
</section>

<section class="slide">
    <h2>DPXDT, webdiff</h2>
    <ul>
        <li>Тестирует страницы целиком по url</li>
        <li>Не тестирует взаимодействие с пользователем</li>
        <li>Небольшие изменения верстки ломают дифф</li>
    </ul>
</section>

<section class="slide">
    <h2>casper.js + phantom.css</h2>
    <ul>
        <li>Только в phantom.js (один браузер)</li>
        <li>phantom.js умирает</li>
    </ul>
</section>

<section class="slide">
    <h2>gemini</h2>
    <ul>
        <li>Умеет делать скриншоты любой части страницы</li>
        <li>API для взаимодействовия с UI
            <mark>(mouseMove, mouseDown, ...)</mark>
        </li>
        <li class="next">Возможность игнорировать лишнее</li>
        <li class="next">Подробный HTML отчёт</li>
        <li class="next">Есть GUI</li>
        <li class="next">Запуск тестов в разных браузерах</li>
        <li class="next">Есть плагины
            <mark>(coverage, react, webpack, teamcity)</mark>
        </li>
        <li class="next">Кроссплатформенная</li>
    </ul>
</section>

<section class="slide">
    <style>
        .green {
            background: #4caf50 !important;
        }

        .red {
            background: #cc0000 !important;
        }

        #table,
        #table th,
        #table td {
            border: 1px solid #ddd;
            text-align: center;
            font-weight: 400;
        }

        #table th:first-child,
        #table td:first-child {
            padding: 10px !important;
        }

        #table th,
        #table td {
            padding: 20px;
        }
    </style>
    <h2>Таблица сравнения</h2>
    <table id="table">
        <thead>
        <tr>
            <th>&nbsp;</th>
            <th>Страницы</th>
            <th>Блоки</th>
            <th>Исключения</th>
            <th>Разные браузеры</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td>webdiff, DPXDT</td>
            <td class="green">&nbsp;</td>
            <td class="red">&nbsp;</td>
            <td class="red">&nbsp;</td>
            <td class="red">&nbsp;</td>
        </tr>
        <tr>
            <td>phantom.css</td>
            <td class="green">&nbsp;</td>
            <td class="green">&nbsp;</td>
            <td class="green">&nbsp;</td>
            <td class="red">&nbsp;</td>
        </tr>
        <tr>
            <td>gemini</td>
            <td class="green">&nbsp;</td>
            <td class="green">&nbsp;</td>
            <td class="green">&nbsp;</td>
            <td class="green">&nbsp;</td>
        </tr>
        </tbody>
    </table>
</section>

<section class="slide">
    <h2>Недостатки gemini</h2>
    <ul>
        <li>Работает через selenium</li>
        <li>Нужно хранить скриншоты в репозитории</li>
        <li>Нужно писать тесты</li>
    </ul>
</section>

<section class="slide">
    <h2 class="shout">Примеры</h2>
</section>

<section class="slide">
    <h2>Пример теста</h2>
    <pre>
        <code>gemini.suite('RequisiteHistoryEditor', suite => {</code>
        <code>  suite.setUrl(url)</code>
        <code>    .setCaptureElements(selectors)</code>
        <code>    .capture('clicked', function (actions, find) {</code>
        <code>      this.row = find(rowSelector);</code>
        <code>      actions.click(this.row);</code>
        <code>    });</code>
        <code>});</code>
    </pre>
</section>

<section class="slide">
    <style>
        .grey {
            color: #ddd;
        }
        .blue {
            color: #376da3;
        }
    </style>
    <h2>Пример теста</h2>
    <pre>
        <code>gemini.suite(<mark>'RequisiteHistoryEditor'</mark>, suite => {</code>
        <code class="grey">  suite.setUrl(url)</code>
        <code class="grey">    .setCaptureElements(selectors)</code>
        <code class="grey">    .capture('clicked', function (actions, find) {</code>
        <code class="grey">      this.row = find(rowSelector);</code>
        <code class="grey">      actions.click(this.row)</code>
        <code class="grey">    });</code>
        <code>});</code>
    </pre>
</section>

<section class="slide">
    <h2>Пример теста</h2>
    <pre>
        <code class="grey">gemini.suite('RequisiteHistoryEditor', suite => {</code>
        <code>  suite.setUrl(<mark>url</mark>)</code>
        <code class="grey">    .setCaptureElements(selectors)</code>
        <code class="grey">    .capture('clicked', function (actions, find) {</code>
        <code class="grey">      this.row = find(rowSelector);</code>
        <code class="grey">      actions.click(this.row);</code>
        <code class="grey">    });</code>
        <code class="grey">});</code>
    </pre>
</section>

<section class="slide">
    <h2>Пример теста</h2>
    <pre>
        <code class="grey">gemini.suite('RequisiteHistoryEditor', suite => {</code>
        <code class="grey">  suite.setUrl(url)</code>
        <code>    .setCaptureElements(<mark>selectors</mark>)</code>
        <code class="grey">    .capture('clicked', function (actions, find) {</code>
        <code class="grey">      this.row = find(rowSelector);</code>
        <code class="grey">      actions.click(this.row);</code>
        <code class="grey">    });</code>
        <code class="grey">});</code>
    </pre>
</section>

<section class="slide">
    <h2>Пример теста</h2>
    <pre>
        <code class="grey">gemini.suite('RequisiteHistoryEditor', suite => {</code>
        <code class="grey">  suite.setUrl(url)</code>
        <code class="grey">    .setCaptureElements(selectors)</code>
        <code>    .capture(<mark>'clicked'</mark>, function (actions, find) {</code>
        <code>      this.row = find(rowSelector);</code>
        <code>      actions.click(this.row);</code>
        <code>    });</code>
        <code class="grey">});</code>
    </pre>
</section>

<section class="slide">
    <img src="pictures/gos_example_1.jpg" class="cover width"/>
</section>

<section class="slide">
    <img src="pictures/gos_example_2.jpg" class="cover width"/>
</section>

<section class="slide">
    <img src="pictures/gos_example_3.jpg" class="cover width"/>
</section>

<section class="slide">
    <h2>Чему нас учит тестирование</h2>
    <ul>
        <li>Писать небольшие, понятные компоненты</li>
        <li>Бережно относиться к изменениям</li>
        <li>Отдавать рутину машине</li>
    </ul>
</section>


<section class="slide">
    <h2>Профит использования css/style тестирования</h2>
    <ul>
        <li>У вас больше времени на разработку</li>
        <li>Меньше боли при рефакторинге</li>
        <li>При обновлениях верстки оперативно видите что изменилось</li>
        <li>Ваши компоненты становятся лаконичнее</li>
        <li>Повышается надежность и уверенность</li>
    </ul>
</section>

<section class="slide">
    <h2>Полезные советы</h2>
    <ul>
        <li>Пишите тесты до релиза</li>
        <li>Используйте песочницу компонентов</li>
        <li>Берегите глаза</li>
    </ul>
</section>

<section class="slide">
    <h2 class="shout">Спасибо</h2>
</section>

<section class="slide">
    <h2>Вопросы?</h2>
    <div>
        <img src="pictures/giphy.gif" width="600"/>
    </div>
</section>

<section class="slide">
    <h2>Как настроить git lfs</h2>
    <ul>
        <li>>$ git lfs install</li>
        <li>>$ git lfs track "gemini/screens/**/*"</li>
    </ul>
</section>

<section class="slide">
    <img src="pictures/git_screenshot.png" class="cover"/>
</section>

<section class="slide">
    <h2>Ссылки</h2>
    <ul>
        <li><a target="_blank" href="https://github.com/gemini-testing/gemini">gemini-testing/gemini</a></li>
        <li><a target="_blank" href="https://getstorybook.io/docs/react-storybook/testing/css-style-testing">react-storybook/testing/css-style-testing</a>
        </li>
        <li><a target="_blank" href="https://events.yandex.ru/lib/talks/4262/">Gemini: различные способы
            использования</a></li>
        <li><a target="_blank" href="https://gist.github.com/cvrebert/adf91e429906a4d746cd">Другие инструменты CSS
            Regression
            Testing</a></li>
        <li><a target="_blank" href="https://github.com/mshatikhin/gemini-react-starter">github.com/mshatikhin/gemini-react-starter</a>
        </li>
    </ul>
</section>

<!--
    To hide progress bar from entire presentation
    just remove “progress” element.
    -->
<div class="progress"></div>
<script src="shower/shower.min.js"></script>
<!-- Copyright © 2015 Yours Truly, Famous Inc. -->
<!-- Photos by John Carey, fiftyfootshadows.net -->
</body>
</html>
